(()=>{let l={imagePath:"/img/fly_koala_game.webp",width:280,messages:["你好呀～歡迎來到考拉茶棧！","今天也要元氣滿滿喔！","點我點我～有驚喜！","這個網站很棒吧？","記得常來玩喔～","正在努力打遊戲中...","嘿！別戳我啦～","要不要一起玩遊戲？","我是賽博考拉，請多指教！","今天的代碼寫完了嗎？","學習使我快樂！","你知道嗎？考拉一天要睡 20 小時呢～","好想吃尤加利葉...","程式寫累了嗎？休息一下吧！","你喜歡哪一種AI工具呢？ChatGPT、Gemini、Claude、DeepSeek？","Claude CLI 又出新版了呢。","AI 時代來臨，你準備好了嗎？","Cursor 和 Windsurf 你比較喜歡哪個？","有試過 Vibe Coding 嗎？讓 AI 幫你寫程式！","MCP 協議讓 AI 工具更強大了呢～","今天有沒有學到新東西呀？","Debug 的時候記得先喝杯水冷靜一下～","Git commit 了嗎？記得要常常存檔喔！","寫程式就像蓋房子，基礎要打好！","Stack Overflow 是工程師的好朋友～","讀文件很重要！RTFM！"],idleMessages:["無聊了嗎？點我陪你聊天～","好安靜啊...","我在這裡等你喔～","好久不見，日子過得好快呢……","嗨～快來逗我玩吧！","你是不是把我忘了呀？","發呆中...zzZ","你還在嗎？我有點寂寞～","螢幕前的你，記得眨眨眼喔！","休息一下吧，喝杯水如何？","看累了嗎？出去走走也不錯喔～","我猜你現在在想事情對不對？","今天的待辦事項都完成了嗎？","有沒有什麼想跟我分享的？","戳戳我嘛～我很無聊欸！","你該不會睡著了吧？"],timeGreetings:{morning:["早上好！一日之計在於晨，美好的一天就要開始了～","早安！今天也要加油喔！","早起的鳥兒有蟲吃，早起的考拉...繼續睡！","Good morning！陽光正好，適合寫 Code！","早安～記得吃早餐喔，空腹傷胃！","新的一天開始啦，有什麼計畫呢？"],forenoon:["上午好！工作順利嗎？不要久坐，多起來走動走動哦！","認真工作的你最棒了！","上午的時光最適合處理重要的事情呢～","專注力最強的時段，好好把握！","上午好！今天的會議多嗎？","記得適時休息，番茄工作法推薦給你！"],noon:["中午了，工作了一個上午，現在是午餐時間！","午安！記得要吃飯喔，不要餓著肚子～","中午要好好休息，下午才有精神！","午餐時間！今天想吃什麼呢？","吃飽飯後小睡一下，效率會更好喔！","中午好！有沒有帶便當呀？"],afternoon:["午後很容易犯困呢，要不要來杯咖啡？","下午好！今天的進度如何呀？","下午茶時間到了～要不要吃點心？","下午容易想睡，站起來動一動吧！","快到傍晚了，再撐一下！","下午好！有沒有遇到什麼有趣的事？"],evening:["傍晚了！窗外夕陽的景色很美麗呢，最美不過夕陽紅～","辛苦了一天，準備下班了嗎？","傍晚是放鬆的好時光呢～","下班時間到！今天辛苦了～","傍晚的天空好美，有沒有看看窗外？","晚餐想吃什麼呢？"],night:["晚上好，今天過得怎麼樣？","晚上好！今天辛苦了～","夜晚是屬於自己的時間，好好享受吧！","晚上好！有沒有什麼計畫？追劇？打Game？","夜深了，適合思考人生（？）","晚上好～今天有沒有什麼收穫？"],lateNight:["已經這麼晚了呀，早點休息吧，晚安～","深夜了要愛護眼睛呀！","熬夜對身體不好喔，早點睡吧～","夜深了，記得調低螢幕亮度喔！","還不睡嗎？明天會很累的～","深夜的寧靜很適合思考呢，但也要注意休息！"],midnight:["你是夜貓子呀？這麼晚還不睡覺，明天起的來嘛？","凌晨了！快去睡覺！","這個時間還不睡...你是在趕專案嗎？","凌晨了欸！你是不是睡不著？","這麼晚還在線，是有什麼心事嗎？","夜貓子你好！但真的該睡了喔～"]},festivals:[{date:"01/01",name:"元旦",message:["新年快樂！願你新的一年心想事成！","元旦快樂！今年也請多多指教～"]},{date:"02/14",name:"情人節",message:["情人節快樂！有對象的放閃去吧～","今天是情人節呢，有收到巧克力嗎？"]},{date:"02/28",name:"和平紀念日",message:["今天是和平紀念日，讓我們珍惜和平～"]},{date:"03/08",name:"婦女節",message:["婦女節快樂！向偉大的女性們致敬！"]},{date:"03/14",name:"白色情人節",message:["白色情人節快樂！記得回禮喔～"]},{date:"04/01",name:"愚人節",message:["愚人節快樂！今天說的話要小心求證喔～","今天我說的都是真的...才怪！"]},{date:"04/04",name:"兒童節",message:["兒童節快樂！保持童心很重要喔～","不管幾歲，都要有顆童心！"]},{date:"04/05",name:"清明節",message:["清明時節，記得慎終追遠～"]},{date:"05/01",name:"勞動節",message:["勞動節快樂！辛苦工作的你值得休息！"]},{date:"05/12",name:"母親節",message:["母親節快樂！記得跟媽媽說聲謝謝喔～","今天有沒有給媽媽一個擁抱呢？"]},{date:"06/18",name:"端午節",message:["端午節快樂！記得吃粽子喔～","划龍舟、吃粽子、掛艾草，端午節安康！"]},{date:"08/08",name:"父親節",message:["父親節快樂！記得感謝爸爸的付出喔～","今天是八八節，要對爸爸好一點！"]},{date:"09/17",name:"中秋節",message:["中秋節快樂！月餅好吃嗎？","中秋佳節，闔家團圓，記得賞月喔～"]},{date:"09/28",name:"教師節",message:["教師節快樂！感謝老師們的教導！"]},{date:"10/10",name:"國慶日",message:["國慶日快樂！今天有看到煙火嗎？","雙十節快樂！"]},{date:"10/31",name:"萬聖節",message:["萬聖節快樂！Trick or Treat!","今天有變裝嗎？不給糖就搗蛋！"]},{date:"11/11",name:"光棍節",message:["光棍節...呃，單身也很好啦！","1111！今天是購物節還是光棍節呢？"]},{date:"12/21",name:"冬至",message:["冬至到了，記得吃湯圓喔！","冬至吃湯圓，又長一歲啦～"]},{date:"12/24",name:"平安夜",message:["平安夜快樂！今晚有什麼計畫嗎？"]},{date:"12/25",name:"聖誕節",message:["聖誕節快樂！Merry Christmas!","叮叮噹～聖誕老人有送你禮物嗎？"]},{date:"12/31",name:"跨年夜",message:["今年的最後一天了！準備好迎接新年了嗎？","跨年快樂！倒數計時開始！"]}],interactions:{mouseover:[{selector:"#nav a",message:["要去 {text} 看看嗎？","點擊前往 {text}"]},{selector:".post-title, .article-title, #article-container h1",message:["這篇「{text}」看起來很有趣呢！"]},{selector:".tag-list a, .article-meta a[href*='tags']",message:["點擊查看 {text} 標籤的文章～"]},{selector:".category-list a, .article-meta a[href*='categories']",message:["想看看 {text} 分類的文章嗎？"]},{selector:"#search-button, .search",message:["想找什麼呢？搜尋一下吧！"]},{selector:".darkmode, #darkmode",message:["要切換深色模式嗎？保護眼睛很重要喔！"]},{selector:".flink-list a, .flink-name",message:["{text} 是個不錯的網站呢！"]},{selector:"img:not(.flykoala-img)",message:["這張圖片好看嗎？","好棒的圖片！"]},{selector:"#to-top, .back-to-top",message:["回到頂部？我也想飛上去！"]},{selector:".recent-post-item",message:["這篇文章看起來不錯呢～"]},{selector:".aside-card, .card-widget",message:["側邊欄有很多有趣的資訊喔！"]},{selector:"#footer, footer",message:["已經到底部啦，要回去上面嗎？"]}],click:[{selector:"#nav a, .menus_item a",message:["正在前往 {text}...","Let's go！"]},{selector:".post-title a, article a[rel='bookmark']",message:["開始閱讀「{text}」～","這篇看起來很有趣！"]},{selector:"a[href^='http']:not([href*='{hostname}'])",message:["要離開去外面的網站了嗎？記得回來喔！"]},{selector:"#darkmode, .darkmode",message:["切換成功！眼睛舒服多了吧？"]},{selector:".share-item, .social-share a",message:["謝謝你願意分享！"]}]},copyMessages:["你都複製了些什麼呀，轉載要記得加上出處哦！","複製成功！記得標註來源喔～","嘿！經過同意了嗎？"],visibilityMessages:["哇，你終於回來了～","歡迎回來！想我了嗎？","你跑去哪裡啦？","終於回來啦，我等你好久了！"],consoleMessages:["哈哈，你打開了控制台，是想要看看我的小秘密嗎？","開發者你好！請不要亂改我喔～","F12 大師你好！"],weather:{defaultCity:"Taipei",defaultLat:25.033,defaultLon:121.5654,weatherCodes:{0:{icon:"☀️",desc:"晴天"},1:{icon:"🌤️",desc:"大部晴朗"},2:{icon:"⛅",desc:"多雲"},3:{icon:"☁️",desc:"陰天"},45:{icon:"🌫️",desc:"霧"},48:{icon:"🌫️",desc:"霧凇"},51:{icon:"🌦️",desc:"毛毛雨"},53:{icon:"🌦️",desc:"中度毛毛雨"},55:{icon:"🌧️",desc:"大毛毛雨"},56:{icon:"🌨️",desc:"凍毛毛雨"},57:{icon:"🌨️",desc:"強凍毛毛雨"},61:{icon:"🌧️",desc:"小雨"},63:{icon:"🌧️",desc:"中雨"},65:{icon:"🌧️",desc:"大雨"},66:{icon:"🌨️",desc:"凍雨"},67:{icon:"🌨️",desc:"強凍雨"},71:{icon:"🌨️",desc:"小雪"},73:{icon:"🌨️",desc:"中雪"},75:{icon:"❄️",desc:"大雪"},77:{icon:"🌨️",desc:"雪粒"},80:{icon:"🌦️",desc:"小陣雨"},81:{icon:"🌧️",desc:"中陣雨"},82:{icon:"⛈️",desc:"大陣雨"},85:{icon:"🌨️",desc:"小陣雪"},86:{icon:"❄️",desc:"大陣雪"},95:{icon:"⛈️",desc:"雷陣雨"},96:{icon:"⛈️",desc:"雷陣雨夾冰雹"},99:{icon:"⛈️",desc:"強雷陣雨夾冰雹"}},weatherMessages:{hot:["好熱啊～記得多喝水！","這種天氣適合待在冷氣房！","外面熱到可以煎蛋了！"],warm:["天氣很舒適呢～","適合出門走走的好天氣！","這溫度剛剛好！"],cool:["有點涼了，注意保暖喔！","涼涼的天氣，適合喝杯熱飲～","記得帶件外套！"],cold:["好冷喔！記得穿暖一點！","冷颼颼的，要注意保暖！","這種天氣適合窩在被窩裡！"],rainy:["下雨了，記得帶傘喔！","雨天路滑，小心行走！","聽雨聲也挺放鬆的～"],sunny:["陽光普照，心情也跟著好起來！","好天氣要珍惜喔！","記得做好防曬！"]}}};function i(e){return Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e}function s(){var e=5<=(e=(new Date).getHours())&&e<8?"morning":8<=e&&e<11?"forenoon":11<=e&&e<13?"noon":13<=e&&e<17?"afternoon":17<=e&&e<19?"evening":19<=e&&e<22?"night":22<=e||e<1?"lateNight":"midnight";return i(l.timeGreetings[e])}function o(){return document.title.split(" - ")[0]||document.title.split(" | ")[0]}let n=null,c=0;function d(t,a=4e3,s=5){if(t&&!(c>s&&n)){let e=document.querySelector(".flykoala-tips");e&&(n&&(clearTimeout(n),n=null),t=i(t),c=s,e.innerHTML=t,e.classList.add("active"),n=setTimeout(()=>{e.classList.remove("active"),c=0},a))}}let e=!1,t=null,r=[...l.idleMessages];async function m(){d("正在查詢天氣中...",2e3,8);var e=await(async()=>{try{var e=await(await fetch("https://ipapi.co/json/")).json();return{lat:e.latitude,lon:e.longitude,city:e.city||l.weather.defaultCity}}catch(e){return console.log("無法取得位置，使用預設值"),{lat:l.weather.defaultLat,lon:l.weather.defaultLon,city:l.weather.defaultCity}}})();let s=await(async(e,t)=>{try{return(await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m,weather_code,relative_humidity_2m,wind_speed_10m&timezone=auto`)).json()).current}catch(e){return console.error("天氣 API 錯誤:",e),null}})(e.lat,e.lon);if(s){let a=Math.round(s.temperature_2m);t=s.weather_code;var t=l.weather.weatherCodes[t]||{icon:"🌡️",desc:"未知"},o=s.relative_humidity_2m,n=Math.round(s.wind_speed_10m);d(`
      <div class="flykoala-weather">
        <div class="weather-header">
          <span class="weather-icon">${t.icon}</span>
          <span class="weather-city">${e.city}</span>
        </div>
        <div class="weather-temp">${a}°C</div>
        <div class="weather-desc">${t.desc}</div>
        <div class="weather-detail">
          💧 ${o}% · 💨 ${n} km/h
        </div>
      </div>
    `,8e3,9),setTimeout(()=>{let e=32<=(t=a)?"hot":24<=t?"warm":16<=t?"cool":"cold";t=s.weather_code,[51,53,55,56,57,61,63,65,66,67,80,81,82,95,96,99].includes(t)?e="rainy":s.weather_code<=1&&(e="sunny");var t=i(l.weather.weatherMessages[e]);d(t,5e3,7)},8500)}else d("哎呀，天氣資訊取得失敗了...",4e3,8)}function g(){let e="",t=(()=>{var e,t=new Date,a=String(t.getMonth()+1).padStart(2,"0")+"/"+String(t.getDate()).padStart(2,"0");for(e of l.festivals)if(e.date===a)return{name:e.name,message:i(e.message)};return null})();var a;t?(e=t.message,Array.isArray(l.festivals.find(e=>e.name===t.name)?.message)&&r.push(...l.festivals.find(e=>e.name===t.name).message)):e="/"===location.pathname||"/index.html"===location.pathname?s():document.referrer?(a=new URL(document.referrer),location.hostname===a.hostname?`歡迎閱讀<span class="flykoala-highlight">「${o()}」</span>`:(a=a.hostname).includes("google")?"Hello！來自 Google 搜尋的朋友～<br>歡迎來到考拉茶棧！":a.includes("baidu")?"Hello！來自百度搜尋的朋友～<br>歡迎來到考拉茶棧！":a.includes("github")?"Hello！從 GitHub 來的朋友～<br>歡迎來到考拉茶棧！":`Hello！來自 <span class="flykoala-highlight">${a}</span> 的朋友～`):`歡迎來到<span class="flykoala-highlight">「${o()}」</span>～`,setTimeout(()=>{d(e,7e3,8)},1500)}function h(){let e=document.getElementById("flykoala-toggle");e||((e=document.createElement("div")).id="flykoala-toggle",e.innerHTML='<i class="fas fa-user-astronaut"></i>',e.title="召喚飛考拉",document.body.appendChild(e),e.addEventListener("click",()=>{document.getElementById("static-fly-koala").classList.remove("hide"),e.classList.add("hide"),localStorage.removeItem("flykoala-hidden"),d("我回來啦～想我了嗎？",4e3,8)})),e.classList.remove("hide")}function a(){if(!(screen.width<768)){(a=document.createElement("div")).id="static-fly-koala",a.innerHTML=`
      <div class="flykoala-tips"></div>
      <div class="flykoala-body">
        <img src="${l.imagePath}" alt="飛考拉" class="flykoala-img">
      </div>
      <div class="flykoala-toolbar">
        <span class="flykoala-tool" id="flykoala-tool-weather" title="天氣"><i class="fas fa-cloud-sun"></i></span>
        <span class="flykoala-tool" id="flykoala-tool-hitokoto" title="一言"><i class="fas fa-quote-left"></i></span>
        <span class="flykoala-tool" id="flykoala-tool-comment" title="說話"><i class="fas fa-comment"></i></span>
        <span class="flykoala-tool" id="flykoala-tool-home" title="回首頁"><i class="fas fa-home"></i></span>
        <span class="flykoala-tool" id="flykoala-tool-close" title="隱藏"><i class="fas fa-times"></i></span>
      </div>
    `,document.body.appendChild(a);{let e=document.getElementById("static-fly-koala"),t=document.querySelector(".flykoala-img");t.addEventListener("click",()=>{d(i(l.messages),4e3,5),t.classList.add("clicked"),setTimeout(()=>t.classList.remove("clicked"),300)}),document.getElementById("flykoala-tool-weather").addEventListener("click",m),document.getElementById("flykoala-tool-hitokoto").addEventListener("click",()=>{fetch("https://v1.hitokoto.cn").then(e=>e.json()).then(e=>{d(`「${e.hitokoto}」<br><small>——${e.from||"佚名"}</small>`,8e3,9)}).catch(()=>{d("獲取一言失敗了...網路好像有點問題",4e3,5)})}),document.getElementById("flykoala-tool-comment").addEventListener("click",()=>{d(i(l.messages),4e3,5)}),document.getElementById("flykoala-tool-home").addEventListener("click",()=>{d("回首頁囉～",2e3,7),setTimeout(()=>{window.location.href="/"},500)}),document.getElementById("flykoala-tool-close").addEventListener("click",()=>{localStorage.setItem("flykoala-hidden",Date.now()),d("願你有一天能與重要的人重逢。",2e3,10),setTimeout(()=>{e.classList.add("hide"),h()},2e3)}),l.interactions.mouseover.forEach(({selector:e,message:a})=>{document.addEventListener("mouseover",t=>{t=t.target.closest(e);if(t){let e=i(a);t=t.innerText||t.title||t.alt||"";d(e=e.replace("{text}",t.substring(0,20)),4e3,4)}})}),l.interactions.click.forEach(({selector:e,message:a})=>{document.addEventListener("click",t=>{t=t.target.closest(e);if(t){let e=i(a);t=t.innerText||t.title||"";d(e=(e=e.replace("{text}",t.substring(0,20))).replace("{hostname}",location.hostname),4e3,6)}})}),window.addEventListener("copy",()=>{d(i(l.copyMessages),5e3,7)}),document.addEventListener("visibilitychange",()=>{document.hidden||d(i(l.visibilityMessages),5e3,7)});var a=()=>{};console.log("%c",a),a.toString=()=>{d(i(l.consoleMessages),6e3,9)},t.addEventListener("mouseenter",()=>{d(i(["嗨～","你來啦！","要摸摸嗎？","嘿嘿～","幹嘛戳我！"]),2e3,4)})}(a=localStorage.getItem("flykoala-hidden"))&&(36e5<Date.now()-parseInt(a)?localStorage.removeItem("flykoala-hidden"):(document.getElementById("static-fly-koala").classList.add("hide"),h())),window.addEventListener("mousemove",()=>e=!0),window.addEventListener("keydown",()=>e=!0),setInterval(()=>{e?(e=!1,t&&(clearInterval(t),t=null)):t=t||setInterval(()=>{d(i(r),6e3,3)},25e3)},1e3),g()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()})();